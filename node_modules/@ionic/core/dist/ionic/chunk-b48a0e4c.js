/*!
 * (C) Ionic http://ionicframework.com - MIT License
 * Built with http://stenciljs.com
 */
const{h:n}=window.Ionic;let e=0;function t(n,t){const i=n.ownerDocument;!function(n){0===e&&(e=1,n.body.addEventListener("keyup",e=>{if("Escape"===e.key){const e=o(n);e&&!0===e.backdropDismiss&&e.dismiss("backdrop")}}))}(i),Object.assign(n,t),n.classList.add("ion-page-invisible");const a=e++;return n.overlayIndex=a,n.hasAttribute("id")||(n.id=`ion-overlay-${a}`),r(i).appendChild(n),i.body.addEventListener("keyup",n=>{if("Escape"===n.key){const n=o(i);n&&n.backdropDismiss&&n.dismiss(null,m)}}),n.componentOnReady()}function i(n,e,t,i,a){const s=o(n,i,a);return s?s.dismiss(e,t):Promise.reject("overlay does not exist")}function o(n,e,t){const i=function(n,e){const t=Array.from(r(n).children);return null==e?t:(e=e.toUpperCase(),t.filter(n=>n.tagName===e))}(n,e);return null!=t?i.find(n=>n.id===t):null==t?i[i.length-1]:i.find(n=>n.overlayIndex===t)}async function a(n,e,t,i,o){if(n.presented)return;n.presented=!0,n.willPresent.emit();const a=n.enterAnimation?n.enterAnimation:n.config.get(e,"ios"===n.mode?t:i);await c(n,a,n.el,o),n.didPresent.emit()}async function s(n,e,t,i,o,a,s){if(!n.presented)return;n.presented=!1,n.willDismiss.emit({data:e,role:t});const r=n.leaveAnimation?n.leaveAnimation:n.config.get(i,"ios"===n.mode?o:a);await c(n,r,n.el,s),n.didDismiss.emit({data:e,role:t}),n.el.remove()}function r(n){return n.querySelector("ion-app")||n.body}async function c(n,e,t,i){n.animation&&(n.animation.destroy(),n.animation=void 0),t.classList.remove("ion-page-invisible");const o=t.shadowRoot||n.el,a=n.animation=await n.animationCtrl.create(e,o,i);n.animation=a,n.animated||a.duration(0),n.keyboardClose&&a.beforeAddWrite(()=>{const n=t.ownerDocument.activeElement;n&&n.matches("input, ion-input, ion-textarea")&&n.blur()}),await a.playAsync(),a.destroy(),n.animation=void 0}function d(n,e){let t;const i=new Promise(n=>t=n);return function(n,e,i){const o=i=>{n.removeEventListener(e,o),(n=>{t(n.detail)})(i)};n.addEventListener(e,o)}(n,e),i}function l(n){return"cancel"===n||n===m}const m="backdrop";export{t as a,i as b,o as c,m as d,s as e,d as f,l as g,a as h};